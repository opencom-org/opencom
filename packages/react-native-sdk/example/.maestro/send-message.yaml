# Test: Send Message
# Verifies sending a message in a conversation

appId: com.opencom.sdk.example
name: Send Message Test
tags:
  - messenger
  - conversations

---

- launchApp:
    clearState: true

# Wait for app to load
- extendedWaitUntil:
    visible: "Your App Content"
    timeout: 10000

# Dismiss any outbound messages first
- runFlow: helpers/dismiss-outbound.yaml

# Open messenger
- tapOn:
    id: "opencom-launcher"

# Wait for messenger
- extendedWaitUntil:
    visible: "Messages"
    timeout: 5000

# Start new conversation
- tapOn:
    id: "new-conversation-button"

# Wait for conversation screen
- extendedWaitUntil:
    visible: "Conversation"
    timeout: 5000

# Tap on message input
- tapOn:
    id: "message-input"

# Type a test message
- inputText: "Hello, this is a test message from Maestro!"

# Tap send button
- tapOn:
    id: "send-button"

# Wait for message to appear in the list
- extendedWaitUntil:
    visible: "Hello, this is a test message from Maestro!"
    timeout: 5000
